macro include {-> <stdio.h> <-}
macro include {-> <stdlib.h> <-}

def showMessage(text: [&u8])
  spawn {-> 
    printf("Hello, world! He is your text: \"%s\"\n", text);
  <-}
end

spawn {->
  printf("before the function is called.\n");
<-}

our msg: [&u8] = spawn our {->"My name is Lucas!";<-}

pendence showMessage
arg [!text] msg
call

spawn {->
  free(msg);
<-}

spawn {->
  printf("back-stack working properly.\n");
<-}

spawn our {->
  return 0;
<-}